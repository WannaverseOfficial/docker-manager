<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docker Manager</title>
    <link rel="icon" type="image/svg+xml" href="assets/favico.svg">
    <!-- Critical button padding styles - must load before Material Web -->
    <style>
        /* Increased button padding for better visual appearance */
        md-filled-button {
            --md-filled-button-leading-space: 36px;
            --md-filled-button-trailing-space: 36px;
            --md-filled-button-with-leading-icon-leading-space: 24px;
            --md-filled-button-with-leading-icon-trailing-space: 32px;
            --md-filled-button-with-trailing-icon-leading-space: 32px;
            --md-filled-button-with-trailing-icon-trailing-space: 24px;
        }
        md-outlined-button {
            --md-outlined-button-leading-space: 36px;
            --md-outlined-button-trailing-space: 36px;
            --md-outlined-button-with-leading-icon-leading-space: 24px;
            --md-outlined-button-with-leading-icon-trailing-space: 32px;
            --md-outlined-button-with-trailing-icon-leading-space: 32px;
            --md-outlined-button-with-trailing-icon-trailing-space: 24px;
        }
        md-filled-tonal-button {
            --md-filled-tonal-button-leading-space: 36px;
            --md-filled-tonal-button-trailing-space: 36px;
            --md-filled-tonal-button-with-leading-icon-leading-space: 24px;
            --md-filled-tonal-button-with-leading-icon-trailing-space: 32px;
            --md-filled-tonal-button-with-trailing-icon-leading-space: 32px;
            --md-filled-tonal-button-with-trailing-icon-trailing-space: 24px;
        }
        md-text-button {
            --md-text-button-leading-space: 24px;
            --md-text-button-trailing-space: 24px;
            --md-text-button-with-leading-icon-leading-space: 20px;
            --md-text-button-with-leading-icon-trailing-space: 24px;
            --md-text-button-with-trailing-icon-leading-space: 24px;
            --md-text-button-with-trailing-icon-trailing-space: 20px;
        }
    </style>
    <link rel="stylesheet" href="css/theme.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Initial Loading Screen -->
    <div id="loading-screen" style="position:fixed;inset:0;background:#111418;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:16px;z-index:9999;">
        <div style="font-size:48px;color:#a0c4ff;">&#x1F433;</div>
        <div style="color:#e2e2e6;font-family:'Inter',sans-serif;">Loading Docker Manager...</div>
    </div>

    <!-- Login Overlay -->
    <div id="login-overlay" class="overlay hidden">
        <div class="login-card">
            <div class="login-header">
                <a href="https://github.com/WannaverseOfficial" target="_blank" rel="noopener noreferrer">
                    <img src="assets/logo.png" alt="Docker Manager" class="login-logo">
                </a>
            </div>
            <form id="login-form">
                <md-filled-text-field
                    id="login-username"
                    label="Username"
                    type="text"
                    required>
                </md-filled-text-field>
                <md-filled-text-field
                    id="login-password"
                    label="Password"
                    type="password"
                    required>
                </md-filled-text-field>
                <div id="login-error" class="error-message hidden"></div>
                <md-filled-button type="submit" class="full-width">
                    Sign In
                </md-filled-button>
            </form>
        </div>
    </div>

    <!-- Change Password Overlay -->
    <div id="change-password-overlay" class="overlay hidden">
        <div class="login-card">
            <div class="login-header">
                <span class="material-symbols-outlined logo-icon">lock_reset</span>
                <h1>Change Password</h1>
                <p class="subtitle">You must change your password before continuing</p>
            </div>
            <form id="change-password-form">
                <md-filled-text-field
                    id="current-password"
                    label="Current Password"
                    type="password"
                    required>
                </md-filled-text-field>
                <md-filled-text-field
                    id="new-password"
                    label="New Password"
                    type="password"
                    required>
                </md-filled-text-field>
                <md-filled-text-field
                    id="confirm-password"
                    label="Confirm New Password"
                    type="password"
                    required>
                </md-filled-text-field>
                <div id="password-error" class="error-message hidden"></div>
                <md-filled-button type="submit" class="full-width">
                    Change Password
                </md-filled-button>
            </form>
        </div>
    </div>

    <!-- Splash Screen (Host Selection) -->
    <div id="splash-overlay" class="overlay hidden">
        <div class="splash-card">
            <div class="splash-header">
                <span class="material-symbols-outlined logo-icon floating">deployed_code</span>
                <h1>Docker Manager</h1>
                <p class="subtitle">Connect to a Docker Host to get started</p>
            </div>
            <div class="splash-content">
                <div id="existing-hosts" class="hosts-list hidden">
                    <h3>Recent Hosts</h3>
                    <div id="hosts-list-container"></div>
                </div>
                <div class="add-host-section">
                    <h3>Quick Connect</h3>
                    <div class="quick-connect-options">
                        <button type="button" class="quick-connect-btn" data-url="unix:///var/run/docker.sock">
                            <span class="material-symbols-outlined">home</span>
                            <span class="quick-connect-label">Local Socket</span>
                            <span class="quick-connect-hint">unix:///var/run/docker.sock</span>
                        </button>
                        <button type="button" class="quick-connect-btn" data-url="tcp://localhost:2375">
                            <span class="material-symbols-outlined">lan</span>
                            <span class="quick-connect-label">Local TCP</span>
                            <span class="quick-connect-hint">tcp://localhost:2375</span>
                        </button>
                    </div>
                    <div class="divider-text"><span>or enter manually</span></div>
                    <form id="splash-add-host-form">
                        <md-filled-text-field
                            id="splash-host-url"
                            label="Docker Host URL"
                            type="text"
                            placeholder="tcp://192.168.1.100:2375"
                            required>
                        </md-filled-text-field>
                        <md-filled-button type="submit" class="full-width">
                            <span class="material-symbols-outlined">add</span>
                            Connect
                        </md-filled-button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app" class="app-container hidden">
        <!-- Sidebar -->
        <aside id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <a href="https://github.com/WannaverseOfficial" target="_blank" rel="noopener noreferrer">
                    <img src="assets/logo.png" alt="Docker Manager" class="sidebar-logo">
                </a>
            </div>

            <div class="host-selector">
                <md-filled-select id="host-select" label="Docker Host">
                    <!-- Populated dynamically -->
                </md-filled-select>
                <div id="connection-status" class="connection-status">
                    <span class="status-dot"></span>
                    <span class="status-text">Checking...</span>
                </div>
            </div>

            <nav class="nav-list">
                <md-list>
                    <md-list-item type="button" data-page="dashboard" class="nav-item active">
                        <span class="material-symbols-outlined" slot="start">dashboard</span>
                        <span slot="headline">Dashboard</span>
                    </md-list-item>
                    <md-list-item type="button" data-page="containers" class="nav-item">
                        <span class="material-symbols-outlined" slot="start">inventory_2</span>
                        <span slot="headline">Containers</span>
                    </md-list-item>
                    <md-list-item type="button" data-page="templates" class="nav-item">
                        <span class="material-symbols-outlined" slot="start">library_books</span>
                        <span slot="headline">Templates</span>
                    </md-list-item>
                    <md-list-item type="button" data-page="images" class="nav-item">
                        <span class="material-symbols-outlined" slot="start">layers</span>
                        <span slot="headline">Images</span>
                    </md-list-item>
                    <md-list-item type="button" data-page="volumes" class="nav-item">
                        <span class="material-symbols-outlined" slot="start">hard_drive</span>
                        <span slot="headline">Volumes</span>
                    </md-list-item>
                    <md-list-item type="button" data-page="networks" class="nav-item">
                        <span class="material-symbols-outlined" slot="start">hub</span>
                        <span slot="headline">Networks</span>
                    </md-list-item>
                    <md-list-item type="button" data-page="ingress" class="nav-item">
                        <span class="material-symbols-outlined" slot="start">router</span>
                        <span slot="headline">Ingress</span>
                    </md-list-item>
                    <md-divider></md-divider>
                    <md-list-item type="button" data-page="git-repos" class="nav-item">
                        <span class="material-symbols-outlined" slot="start">code</span>
                        <span slot="headline">Git Repos</span>
                    </md-list-item>
                    <md-list-item type="button" data-page="deployment-history" class="nav-item">
                        <span class="material-symbols-outlined" slot="start">history</span>
                        <span slot="headline">History</span>
                    </md-list-item>
                    <md-list-item type="button" data-page="hosts" class="nav-item">
                        <span class="material-symbols-outlined" slot="start">dns</span>
                        <span slot="headline">Hosts</span>
                    </md-list-item>
                    <md-list-item type="button" data-page="container-health" class="nav-item">
                        <span class="material-symbols-outlined" slot="start">monitor_heart</span>
                        <span slot="headline">Health</span>
                    </md-list-item>
                    <md-divider></md-divider>
                    <md-list-item type="button" data-page="notification-preferences" class="nav-item">
                        <span class="material-symbols-outlined" slot="start">notifications</span>
                        <span slot="headline">Notifications</span>
                    </md-list-item>
                    <md-divider></md-divider>
                    <md-list-item type="button" data-page="users" class="nav-item admin-only hidden">
                        <span class="material-symbols-outlined" slot="start">group</span>
                        <span slot="headline">Users</span>
                    </md-list-item>
                    <md-list-item type="button" data-page="registries" class="nav-item admin-only hidden">
                        <span class="material-symbols-outlined" slot="start">cloud_upload</span>
                        <span slot="headline">Registries</span>
                    </md-list-item>
                    <md-list-item type="button" data-page="image-policies" class="nav-item admin-only hidden">
                        <span class="material-symbols-outlined" slot="start">policy</span>
                        <span slot="headline">Image Policies</span>
                    </md-list-item>
                    <md-list-item type="button" data-page="smtp-settings" class="nav-item admin-only hidden">
                        <span class="material-symbols-outlined" slot="start">mail</span>
                        <span slot="headline">SMTP Settings</span>
                    </md-list-item>
                    <md-list-item type="button" data-page="email-logs" class="nav-item admin-only hidden">
                        <span class="material-symbols-outlined" slot="start">schedule_send</span>
                        <span slot="headline">Email Logs</span>
                    </md-list-item>
                    <md-list-item type="button" data-page="audit-logs" class="nav-item admin-only hidden">
                        <span class="material-symbols-outlined" slot="start">history</span>
                        <span slot="headline">Audit Logs</span>
                    </md-list-item>
                </md-list>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header id="header" class="header">
                <div class="header-left">
                    <md-icon-button id="menu-toggle" class="mobile-only">
                        <span class="material-symbols-outlined">menu</span>
                    </md-icon-button>
                    <h1 id="page-title">Dashboard</h1>
                </div>
                <div class="header-right">
                    <md-icon-button id="refresh-btn" title="Refresh">
                        <span class="material-symbols-outlined">refresh</span>
                    </md-icon-button>
                    <div class="user-menu">
                        <md-icon-button id="user-menu-btn">
                            <span class="material-symbols-outlined">account_circle</span>
                        </md-icon-button>
                        <md-menu id="user-menu" anchor="user-menu-btn">
                            <md-menu-item id="menu-username" disabled>
                                <span slot="headline">Username</span>
                            </md-menu-item>
                            <md-divider></md-divider>
                            <md-menu-item id="menu-change-password">
                                <span class="material-symbols-outlined" slot="start">lock</span>
                                <span slot="headline">Change Password</span>
                            </md-menu-item>
                            <md-menu-item id="menu-logout">
                                <span class="material-symbols-outlined" slot="start">logout</span>
                                <span slot="headline">Sign Out</span>
                            </md-menu-item>
                        </md-menu>
                    </div>
                </div>
            </header>

            <!-- Page Content -->
            <div id="content" class="content">
                <!-- Pages are loaded dynamically -->
            </div>
        </main>
    </div>

    <!-- Global Dialog -->
    <md-dialog id="app-dialog">
        <div slot="headline" class="dialog-title"></div>
        <div slot="content" class="dialog-content"></div>
        <div slot="actions" class="dialog-actions"></div>
    </md-dialog>

    <!-- Confirm Dialog -->
    <md-dialog id="confirm-dialog">
        <div slot="headline" class="confirm-title"></div>
        <div slot="content" class="confirm-content"></div>
        <div slot="actions" class="confirm-actions">
            <md-text-button class="confirm-cancel">Cancel</md-text-button>
            <md-filled-button class="confirm-ok">Confirm</md-filled-button>
        </div>
    </md-dialog>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <!-- App Entry Point -->
    <script type="module" src="js/app.js"></script>
</body>
</html>
